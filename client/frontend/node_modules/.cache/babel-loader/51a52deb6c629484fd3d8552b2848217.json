{"ast":null,"code":"import _toConsumableArray from\"/Users/alan/projects/rock-web-chat/client/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/alan/projects/rock-web-chat/client/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/alan/projects/rock-web-chat/client/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/alan/projects/rock-web-chat/client/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Box,Text,IconButton,Spinner,FormControl,Input,useToast}from\"@chakra-ui/react\";import{ChatState}from\"../Context/ChatProvider\";import{ChevronLeftIcon}from\"@chakra-ui/icons\";import{getSender,getSenderFull}from\"../config/ChatLogics\";import ProfileModal from\"./miscellaneous/ProfileModal\";import UpdateGroupChatModal from\"./miscellaneous/UpdateGroupChatModal\";import axios from\"axios\";import\"./styles.css\";import ScrollableChat from\"./ScrollableChat\";import io from\"socket.io-client\";import Lottie from\"react-lottie\";import animationData from\"../animation/typing.json\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ENDPOINT=\"https://rock-web-chat.herokuapp.com/\";var socket,selectedChatCompare;var SingleChat=function SingleChat(_ref){var fetchAgain=_ref.fetchAgain,setFetchAgain=_ref.setFetchAgain;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),newMessage=_useState6[0],setNewMessage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),socketConnected=_useState8[0],setSocketConnected=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),typing=_useState10[0],setTyping=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isTyping=_useState12[0],setIsTyping=_useState12[1];var toast=useToast();var defaultOptions={loop:true,autoplay:true,animationData:animationData,rendererSettings:{preserveAspectRatio:\"xMidYMid slice\"}};var _ChatState=ChatState(),user=_ChatState.user,selectedChat=_ChatState.selectedChat,setSelectedChat=_ChatState.setSelectedChat,notification=_ChatState.notification,setNotification=_ChatState.setNotification;var fetchMessages=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var config,_yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(selectedChat){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.prev=2;config={headers:{Authorization:\"Bearer \".concat(user.token)}};setLoading(true);_context.next=7;return axios.get(\"/api/message/\".concat(selectedChat._id),config);case 7:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setMessages(data);setLoading(false);socket.emit(\"join chat\",selectedChat._id);_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](2);toast({title:\"Error Occured!\",description:\"Failed to Load the Messages\",status:\"error\",duration:5000,isClosable:true,position:\"bottom\"});case 17:case\"end\":return _context.stop();}}},_callee,null,[[2,14]]);}));return function fetchMessages(){return _ref2.apply(this,arguments);};}();useEffect(function(){socket=io(ENDPOINT);socket.emit(\"setup\",user);socket.on(\"connected\",function(){return setSocketConnected(true);});socket.on(\"typing\",function(){return setIsTyping(true);});socket.on(\"stop typing\",function(){return setIsTyping(false);});},[]);useEffect(function(){fetchMessages();selectedChatCompare=selectedChat;},[selectedChat]);useEffect(function(){socket.on(\"message received\",function(newMessageRecieved){if(!selectedChatCompare||selectedChatCompare._id!==newMessageRecieved.chat._id){if(!notification.includes(newMessageRecieved)){setNotification([newMessageRecieved].concat(_toConsumableArray(notification)));// setFetchAgain(!fetchAgain);\n}}else{setMessages([].concat(_toConsumableArray(messages),[newMessageRecieved]));}});});var sendMessage=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){var config,_yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(event.key===\"Enter\"&&newMessage)){_context2.next=16;break;}socket.emit(\"stop typing\",selectedChat._id);_context2.prev=2;config={headers:{\"Content-type\":\"application/json\",Authorization:\"Bearer \".concat(user.token)}};_context2.next=6;return axios.post(\"/api/message\",{content:newMessage,chatId:selectedChat._id},config);case 6:_yield$axios$post=_context2.sent;data=_yield$axios$post.data;setNewMessage(\"\");setMessages([].concat(_toConsumableArray(messages),[data]));socket.emit(\"new message\",data);_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](2);toast({title:\"Error Occured!\",description:\"Failed to send the Message\",status:\"warning\",duration:4000,isClosable:true,position:\"bottom\"});case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[2,13]]);}));return function sendMessage(_x){return _ref3.apply(this,arguments);};}();var typingHandler=function typingHandler(event){setNewMessage(event.target.value);//Typing Indicator Logic\nif(!socketConnected)return;if(!typing){setTyping(true);socket.emit(\"typing\",selectedChat._id);}var lastTypingTime=new Date().getTime();var timerLength=3000;setTimeout(function(){var timeNow=new Date().getTime();var timeDiff=timeNow-lastTypingTime;if(timeDiff>=timerLength&&typing){socket.emit(\"stop typing\",selectedChat._id);setTyping(false);}},timerLength);};return/*#__PURE__*/_jsx(_Fragment,{children:selectedChat?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Text,{fontSize:{base:\"28px\",md:\"30px\"},pb:3,px:2,w:\"100%\",fontFamily:\"Work sans\",display:\"flex\",justifyContent:{base:\"space-between\"},alignItems:\"center\",children:[/*#__PURE__*/_jsx(IconButton,{display:{base:\"flex\",md:\"none\"},icon:/*#__PURE__*/_jsx(ChevronLeftIcon,{}),onClick:function onClick(){return setSelectedChat(\"\");}}),!selectedChat.isGroupChat?/*#__PURE__*/_jsxs(_Fragment,{children:[getSender(user,selectedChat.users),/*#__PURE__*/_jsx(ProfileModal,{user:getSenderFull(user,selectedChat.users)})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[selectedChat.chatName.toUpperCase(),/*#__PURE__*/_jsx(UpdateGroupChatModal,{fetchAgain:fetchAgain,setFetchAgain:setFetchAgain,fetchMessages:fetchMessages})]})]}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDir:\"column\",justifyContent:\"flex-end\",p:3,bg:\"#E8E8E8\",w:\"100%\",h:\"100%\",borderRadius:\"lg\",overflowY:\"hidden\",children:[loading?/*#__PURE__*/_jsx(Spinner,{size:\"xl\",w:20,h:20,alignSelf:\"center\",margin:\"auto\"}):/*#__PURE__*/_jsx(\"div\",{className:\"messages\",children:/*#__PURE__*/_jsx(ScrollableChat,{messages:messages})}),/*#__PURE__*/_jsxs(FormControl,{onKeyDown:sendMessage,isRequired:true,mt:3,children:[isTyping?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Lottie,{options:defaultOptions,width:70,style:{marginBottom:15,marginLeft:0}})}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsx(Input,{variant:\"filled\",bg:\"#E0E0E0\",placeholder:\"Enter a message..\",onChange:typingHandler,value:newMessage||\"\"})]})]})]}):/*#__PURE__*/_jsx(Box,{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",h:\"100%\",children:/*#__PURE__*/_jsx(Text,{fontSize:\"3xl\",pb:3,fontFamily:\"Work sans\",children:\"Click on a user to start chatting\"})})});};export default SingleChat;","map":{"version":3,"names":["React","useEffect","useState","Box","Text","IconButton","Spinner","FormControl","Input","useToast","ChatState","ChevronLeftIcon","getSender","getSenderFull","ProfileModal","UpdateGroupChatModal","axios","ScrollableChat","io","Lottie","animationData","ENDPOINT","socket","selectedChatCompare","SingleChat","fetchAgain","setFetchAgain","messages","setMessages","loading","setLoading","newMessage","setNewMessage","socketConnected","setSocketConnected","typing","setTyping","isTyping","setIsTyping","toast","defaultOptions","loop","autoplay","rendererSettings","preserveAspectRatio","user","selectedChat","setSelectedChat","notification","setNotification","fetchMessages","config","headers","Authorization","token","get","_id","data","emit","title","description","status","duration","isClosable","position","on","newMessageRecieved","chat","includes","sendMessage","event","key","post","content","chatId","typingHandler","target","value","lastTypingTime","Date","getTime","timerLength","setTimeout","timeNow","timeDiff","base","md","isGroupChat","users","chatName","toUpperCase","marginBottom","marginLeft"],"sources":["/Users/alan/projects/rock-web-chat/client/frontend/src/components/SingleChat.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {\n  Box,\n  Text,\n  IconButton,\n  Spinner,\n  FormControl,\n  Input,\n  useToast,\n} from \"@chakra-ui/react\";\nimport { ChatState } from \"../Context/ChatProvider\";\nimport { ChevronLeftIcon } from \"@chakra-ui/icons\";\nimport { getSender, getSenderFull } from \"../config/ChatLogics\";\nimport ProfileModal from \"./miscellaneous/ProfileModal\";\nimport UpdateGroupChatModal from \"./miscellaneous/UpdateGroupChatModal\";\nimport axios from \"axios\";\nimport \"./styles.css\";\nimport ScrollableChat from \"./ScrollableChat\";\nimport io from \"socket.io-client\";\nimport Lottie from \"react-lottie\";\nimport animationData from \"../animation/typing.json\";\n\nconst ENDPOINT = \"https://rock-web-chat.herokuapp.com/\";\nlet socket, selectedChatCompare;\n\nconst SingleChat = ({ fetchAgain, setFetchAgain }) => {\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [newMessage, setNewMessage] = useState();\n  const [socketConnected, setSocketConnected] = useState(false);\n  const [typing, setTyping] = useState(false);\n  const [isTyping, setIsTyping] = useState(false);\n\n  const toast = useToast();\n\n  const defaultOptions = {\n    loop: true,\n    autoplay: true,\n    animationData: animationData,\n    rendererSettings: {\n      preserveAspectRatio: \"xMidYMid slice\",\n    },\n  };\n\n  const { user, selectedChat, setSelectedChat, notification, setNotification } =\n    ChatState();\n\n  const fetchMessages = async () => {\n    if (!selectedChat) return;\n\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${user.token}`,\n        },\n      };\n\n      setLoading(true);\n\n      const { data } = await axios.get(\n        `/api/message/${selectedChat._id}`,\n        config\n      );\n\n      setMessages(data);\n      setLoading(false);\n      socket.emit(\"join chat\", selectedChat._id);\n    } catch (error) {\n      toast({\n        title: \"Error Occured!\",\n        description: \"Failed to Load the Messages\",\n        status: \"error\",\n        duration: 5000,\n        isClosable: true,\n        position: \"bottom\",\n      });\n    }\n  };\n\n  useEffect(() => {\n    socket = io(ENDPOINT);\n    socket.emit(\"setup\", user);\n    socket.on(\"connected\", () => setSocketConnected(true));\n    socket.on(\"typing\", () => setIsTyping(true));\n    socket.on(\"stop typing\", () => setIsTyping(false));\n  }, []);\n\n  useEffect(() => {\n    fetchMessages();\n    selectedChatCompare = selectedChat;\n  }, [selectedChat]);\n\n  useEffect(() => {\n    socket.on(\"message received\", (newMessageRecieved) => {\n      if (\n        !selectedChatCompare ||\n        selectedChatCompare._id !== newMessageRecieved.chat._id\n      ) {\n        if (!notification.includes(newMessageRecieved)) {\n          setNotification([newMessageRecieved, ...notification]);\n          // setFetchAgain(!fetchAgain);\n        }\n      } else {\n        setMessages([...messages, newMessageRecieved]);\n      }\n    });\n  });\n\n  const sendMessage = async (event) => {\n    if (event.key === \"Enter\" && newMessage) {\n      socket.emit(\"stop typing\", selectedChat._id);\n      try {\n        const config = {\n          headers: {\n            \"Content-type\": \"application/json\",\n            Authorization: `Bearer ${user.token}`,\n          },\n        };\n        const { data } = await axios.post(\n          \"/api/message\",\n          {\n            content: newMessage,\n            chatId: selectedChat._id,\n          },\n          config\n        );\n\n        setNewMessage(\"\");\n        setMessages([...messages, data]);\n        socket.emit(\"new message\", data);\n      } catch (error) {\n        toast({\n          title: \"Error Occured!\",\n          description: \"Failed to send the Message\",\n          status: \"warning\",\n          duration: 4000,\n          isClosable: true,\n          position: \"bottom\",\n        });\n      }\n    }\n  };\n\n  const typingHandler = (event) => {\n    setNewMessage(event.target.value);\n\n    //Typing Indicator Logic\n    if (!socketConnected) return;\n\n    if (!typing) {\n      setTyping(true);\n      socket.emit(\"typing\", selectedChat._id);\n    }\n    let lastTypingTime = new Date().getTime();\n    let timerLength = 3000;\n    setTimeout(() => {\n      let timeNow = new Date().getTime();\n      let timeDiff = timeNow - lastTypingTime;\n\n      if (timeDiff >= timerLength && typing) {\n        socket.emit(\"stop typing\", selectedChat._id);\n        setTyping(false);\n      }\n    }, timerLength);\n  };\n\n  return (\n    <>\n      {selectedChat ? (\n        <>\n          <Text\n            fontSize={{ base: \"28px\", md: \"30px\" }}\n            pb={3}\n            px={2}\n            w=\"100%\"\n            fontFamily=\"Work sans\"\n            display=\"flex\"\n            justifyContent={{ base: \"space-between\" }}\n            alignItems=\"center\"\n          >\n            <IconButton\n              display={{ base: \"flex\", md: \"none\" }}\n              icon={<ChevronLeftIcon />}\n              onClick={() => setSelectedChat(\"\")}\n            />\n            {!selectedChat.isGroupChat ? (\n              <>\n                {getSender(user, selectedChat.users)}\n                <ProfileModal user={getSenderFull(user, selectedChat.users)} />\n              </>\n            ) : (\n              <>\n                {selectedChat.chatName.toUpperCase()}\n                <UpdateGroupChatModal\n                  fetchAgain={fetchAgain}\n                  setFetchAgain={setFetchAgain}\n                  fetchMessages={fetchMessages}\n                />\n              </>\n            )}\n          </Text>\n          <Box\n            display=\"flex\"\n            flexDir=\"column\"\n            justifyContent=\"flex-end\"\n            p={3}\n            bg=\"#E8E8E8\"\n            w=\"100%\"\n            h=\"100%\"\n            borderRadius=\"lg\"\n            overflowY=\"hidden\"\n          >\n            {loading ? (\n              <Spinner\n                size=\"xl\"\n                w={20}\n                h={20}\n                alignSelf=\"center\"\n                margin=\"auto\"\n              />\n            ) : (\n              <div className=\"messages\">\n                <ScrollableChat messages={messages} />\n              </div>\n            )}\n            <FormControl onKeyDown={sendMessage} isRequired mt={3}>\n              {isTyping ? (\n                <div>\n                  <Lottie\n                    options={defaultOptions}\n                    width={70}\n                    style={{ marginBottom: 15, marginLeft: 0 }}\n                  />\n                </div>\n              ) : (\n                <></>\n              )}\n              <Input\n                variant=\"filled\"\n                bg=\"#E0E0E0\"\n                placeholder=\"Enter a message..\"\n                onChange={typingHandler}\n                value={newMessage || \"\"}\n              />\n            </FormControl>\n          </Box>\n        </>\n      ) : (\n        <Box\n          display=\"flex\"\n          alignItems=\"center\"\n          justifyContent=\"center\"\n          h=\"100%\"\n        >\n          <Text fontSize=\"3xl\" pb={3} fontFamily=\"Work sans\">\n            Click on a user to start chatting\n          </Text>\n        </Box>\n      )}\n    </>\n  );\n};\n\nexport default SingleChat;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}